# Handy macros the CodaLab CLI.

# Usage: clhist <bundle>
# Put the command used to create the bundle in the history.
clhist() {
  history -s cl $(cl info -f args $1)
}

clwdiff() {
  vimdiff <(cl print -r $1) <(cl print -r $2)
}

# Useful for chaining cl commands.
# Example: cl search .orphan -u | xcl info
alias xcl='xargs cl'

# Activate autocomplete
# If you are using zsh, you will also need to include the following in your .zshrc:
#   autoload -U +X compinit && compinit
#   autoload -U +X bashcompinit && bashcompinit

if [ -z ${CODALAB_PATH+x} ]; then
    echo "Please set your \$CODALAB_PATH to the path to your clone of the codalab-cli repository before sourcing this codalab-cli/rc file."
elif [ ! -e "$CODALAB_PATH/venv/bin/register-python-argcomplete" ]; then
    echo "Could not find register-python-argcomplete script, have you run \$CODALAB_PATH/setup.sh yet?"
else
    eval "$($CODALAB_PATH/venv/bin/register-python-argcomplete cl)"
fi
